<section class="seccion-perfil-usuario">
    <div class="perfil-usuario-header">
        <div class="perfil-usuario-portada">
            <img src="../../../assets/electricoss.webp" alt="img-avatar">
            <div class="perfil-usuario-avatar">
                <img src="../../../assets/WhatsApp Image 2024-06-12 at 12.54.43.jpeg" alt="img-avatar">
                <button type="button" class="boton-avatar">
                    <i class="far fa-image"></i>
                </button>
            </div>
            <button type="button" class="boton-portada">
                <i class="far fa-image"></i> Cambiar fondo
            </button>
        </div>
    </div>
    <div class="perfil-usuario-body">
        <div class="perfil-usuario-bio">
            <h3 class="titulo">Jose Rivera</h3>
            <p class="texto">Soy un Joven esforzado de 18 a침os, 
                    me dedico al trabajo de la construccion especificamente la Electricidad y en mi tiempo libre juego LOL</p>
        </div>
        <div class="perfil-usuario-footer">
            <ul class="lista-datos">
                <li><i class="icono fas fa-map-signs"></i> Rut: 21.589.157-0</li>
                <li><i class="icono fas fa-phone-alt"></i> Telefono: + 56 9 8799 1666</li>
                <li><i class="icono fas fa-briefcase"></i> Especialidad: Trabajos manuales</li>
            </ul>
            <ul class="lista-datos">
                <li><i class="icono fas fa-map-marker-alt"></i> Comuna: Maipu</li>
                <li><i class="icono fas fa-calendar-alt"></i> Cuenta creada el: 15/12/20024</li>
                <li><i class="icono fas fa-inbox"></i> Email: DonJosesito&#64;gmail.com</li>
            </ul>
        </div>
        <div class="redes-sociales">
            <a href="https://www.facebook.com/" class="boton-redes facebook fab fa-facebook-f"><i class="icon-facebook"></i></a>
            <a href="https://wa.me/" class="boton-redes whatsapp fab fa-whatsapp"><i class="icon-whatsapp"></i></a>
            <a href="https://www.instagram.com/" class="boton-redes instagram fab fa-instagram"><i class="icon-instagram"></i></a>
        </div>
    </div>

    <div class="estrellas-rating">
        <div class="calificacion-numerica">{{ rating | number: '1.1-1' }}</div>
        <div class="estrellas">
          <span *ngFor="let star of stars; let i = index" 
                class="estrella"
                (click)="rate(i + 1)"
                [ngClass]="{'filled': rating >= i + 1, 'half-filled': rating > i && rating < i + 1}">
            &#9733;
          </span>
        </div>
    </div>

    <div class="crear-publicacion">
        <button (click)="abrirModalPublicacion()" class="boton-crear-publicacion">
            <i class="fas fa-edit"></i> Crear Publicaci칩n
        </button>
    </div>

    <!-- Modal para crear una nueva publicaci칩n -->
    <form (ngSubmit)="publicar()" #publicacionForm="ngForm">
        <div class="form-group">
          <label for="texto">Texto:</label>
          <textarea id="texto" name="texto" [(ngModel)]="nuevaPublicacion.texto" required class="form-control"></textarea>
        </div>
      
        <div class="form-group">
          <label for="job_types">Tipo de Trabajo:</label>
          <input type="text" id="job_types" name="job_types" [(ngModel)]="nuevaPublicacion.job_types" required class="form-control">
        </div>
      
        <div class="form-group">
          <label for="description">Descripci칩n:</label>
          <textarea id="description" name="description" [(ngModel)]="nuevaPublicacion.description" required class="form-control"></textarea>
        </div>
      
        <div class="form-group">
          <label for="file">Archivos:</label>
          <input type="file" id="file" name="file" (change)="onFileSelected($event)" multiple class="form-control">
          <div *ngFor="let file of files; let i = index">
            <span>{{ file.name }}</span>
            <button type="button" (click)="eliminarArchivo(i)">Eliminar</button>
          </div>
        </div>
      
        <button type="submit" [disabled]="!publicacionForm.valid" class="btn btn-primary">Publicar</button>
      </form>

    <div class="publicaciones">
        <div *ngFor="let publicacion of publicaciones" class="publicacion">
            <p>{{ publicacion.texto }}</p>
            <div class="media">
                <ng-container *ngFor="let file of publicacion.files">
                    <img *ngIf="file.type.includes('image')" [src]="file.url" [alt]="file.name">
                    <video *ngIf="file.type.includes('video')" [src]="file.url" controls></video>
                </ng-container>
            </div>
        </div>
    </div>

</section>